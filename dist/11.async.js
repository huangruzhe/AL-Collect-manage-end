(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{exUF:function(e,t,a){"use strict";var l=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("giR+");var r=l(a("fyUT"));a("2qtc");var n=l(a("kLXV"));a("DZo9");var i=l(a("8z0m"));a("5NDa");var d=l(a("5rEg"));a("miYZ");var o=l(a("tsqr"));a("Pwec");var u=l(a("CtXQ")),s=l(a("MVZn"));a("y8nQ");var c=l(a("Vl3Y"));a("OaEy");var f=l(a("2fM7")),p=l(a("q1tI")),m=l(a("rmP6"));a("91UR");var h=l(a("phIN")),v={toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],[{color:[]},{background:[]}],["clean"]],clipboard:{matchVisual:!1}},g=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video","color","background"],b=f.default.Option,y=c.default.Item,E=c.default.create()(function(e){var t=e.modalVisible,a=e.form,l=e.handleAdd,c=e.handleModalVisible,E=e.fileList,w=e.modalType,V=e.uploadFile,C=e.previewImage,k=e.previewVisible,L=e.handleCancel,F=e.shopDetail,I=e.floorList,x=e.categoryList,q=e.handlePreview,D=e.handleUpdate,M=function(){a.validateFields(function(e,t){if(!e){a.resetFields();var r=(0,s.default)({},t,{logo:t.logo[0].response.result[0]});"create"===w&&l(r),"update"===w&&D(r)}})},S=function(){a.resetFields(),c()},T=p.default.createElement("div",null,p.default.createElement(u.default,{type:"plus"}),p.default.createElement("div",{className:"ant-upload-text"},"\u4e0a\u4f20")),N=function(e){var t=e.file.status;return"done"===t&&o.default.success("".concat(e.file.name," \u4e0a\u4f20\u6210\u529f.")),V(e.fileList),Array.isArray(e)?e:e&&e.fileList};return p.default.createElement(n.default,{width:"70%",className:h.default.modal,destroyOnClose:!0,title:"create"===w?"\u65b0\u5efa\u5e97\u94fa":"\u7f16\u8f91\u5e97\u94fa",visible:t,onOk:M,maskClosable:!1,onCancel:S},p.default.createElement(y,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5e97\u94fa\u540d\u79f0"},a.getFieldDecorator("name",{initialValue:F.name||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5e97\u94fa\u540d\u79f0\uff01"}]})(p.default.createElement(d.default,{placeholder:"\u8bf7\u8f93\u5165",style:{width:"240px"}}))),p.default.createElement(y,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5e97\u94fa\u53f7"},a.getFieldDecorator("number",{initialValue:F.number||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5e97\u94fa\u95e8\u724c\u53f7\uff01"}]})(p.default.createElement(d.default,{placeholder:"\u8bf7\u8f93\u5165",style:{width:"240px"}}))),p.default.createElement(y,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5e97\u94fa\u5206\u7c7b"},a.getFieldDecorator("shopCategoryId",{initialValue:F.shopCategoryId||null,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5e97\u94fa\u5206\u7c7b\uff01"}]})(p.default.createElement(f.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"240px"}},x.map(function(e){return p.default.createElement(b,{value:e.id,key:e.id},e.name)})))),p.default.createElement(y,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5e97\u94fa\u697c\u5c42"},a.getFieldDecorator("floorId",{initialValue:F.floorId||"",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5e97\u94fa\u697c\u5c42\uff01"}]})(p.default.createElement(f.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"240px"}},I.map(function(e){return p.default.createElement(b,{value:e.id,key:e.id},e.name)})))),p.default.createElement(y,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5e97\u94fa\u56fe\u7247"},a.getFieldDecorator("logo",{initialValue:E,valuePropName:"fileList",getValueFromEvent:N,rules:[{required:!0,message:"\u8bf7\u4e0a\u4f20\u5e97\u94fa\u56fe\u7247"}]})(p.default.createElement(i.default,{name:"multipartFileList",multiple:!1,headers:{Authorization:"Bearer ".concat(localStorage.jwt)},listType:"picture-card",action:"https://788.zz9517.com/api/fastdfs",accept:"image/*",onPreview:q},E.length>=1?null:T)),p.default.createElement(n.default,{visible:k,footer:null,onCancel:L},p.default.createElement("img",{alt:"\u5e97\u94fa\u7167\u7247",style:{width:"100%"},src:C})),p.default.createElement("span",{style:{color:"red"}},"\u56fe\u7247\u5c3a\u5bf8:750X375px")),p.default.createElement(y,{labelCol:{span:5},wrapperCol:{span:15},label:"\u8054\u7cfb\u65b9\u5f0f"},a.getFieldDecorator("phone",{initialValue:F.phone||"",rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u8054\u7cfb\u65b9\u5f0f\uff01"}]})(p.default.createElement(r.default,{placeholder:"\u8bf7\u8f93\u5165",style:{width:"240px"}}))),p.default.createElement(y,{className:h.default.richText,labelCol:{span:5},wrapperCol:{span:15},label:"\u5e97\u94fa\u63cf\u8ff0"},a.getFieldDecorator("content",{initialValue:F.content||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5e97\u94fa\u63cf\u8ff0\uff01"}]})(p.default.createElement(m.default,{theme:"snow",modules:v,formats:g}))))}),w=E;t.default=w},lm2O:function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a("pVnL"));a("IzEo");var i=l(a("bx4M"));a("14J3");var d=l(a("BMrR"));a("+L6B");var o=l(a("2/Rp"));a("jCWc");var u=l(a("kPKH"));a("miYZ");var s=l(a("tsqr")),c=l(a("o0o1")),f=l(a("yXPU"));a("2qtc");var p=l(a("kLXV")),m=l(a("MVZn"));a("/zsF");var h=l(a("PArb")),v=l(a("lwsE")),g=l(a("W8MJ")),b=l(a("a1gu")),y=l(a("Nsbk")),E=l(a("7W2i"));a("OaEy");var w=l(a("2fM7"));a("y8nQ");var V,C,k,L=l(a("Vl3Y")),F=r(a("q1tI")),I=a("MuoO"),x=l(a("CkN6")),q=l(a("zHco")),D=l(a("exUF")),M=l(a("VbPQ")),S=L.default.Item,T=w.default.Option,N=(V=(0,I.connect)(function(e){var t=e.shop,a=e.floor,l=e.loading;return{shop:t,floor:a,loading:l.models.shop}}),C=L.default.create(),V(k=C(k=function(e){function t(){var e,a;(0,v.default)(this,t);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return a=(0,b.default)(this,(e=(0,y.default)(t)).call.apply(e,[this].concat(r))),a.state={formValues:{},modalVisible:!1,fileList:[],modalType:"create",previewImage:"",previewVisible:!1,currentId:"",shopDetail:{}},a.columns=[{title:"\u540d\u79f0",dataIndex:"name"},{title:"\u5e97\u94fa\u56fe\u7247",dataIndex:"logo",render:function(e){return e?F.default.createElement("img",{style:{width:"75px"},src:e,alt:""}):"\u6682\u65e0"}},{title:"\u5206\u7c7b",dataIndex:"shopCategoryName"},{title:"\u697c\u5c42",dataIndex:"floorName"},{title:"\u64cd\u4f5c",render:function(e,t){return F.default.createElement(F.Fragment,null,F.default.createElement("a",{onClick:function(){return a.handleEdit(t)}},"\u7f16\u8f91"),F.default.createElement(h.default,{type:"vertical"}),F.default.createElement("a",{onClick:function(){return a.handleDelete(t)}},"\u5220\u9664"))}}],a.getFormValue=function(){var e=a.props.dispatch;e({type:"shop/fetchCategory"}),e({type:"floor/fetchFloor"})},a.getList=function(e){var t=a.props.dispatch;t({type:"shop/fetch",payload:(0,m.default)({},e)})},a.handleStandardTableChange=function(e){var t=a.state.formValues,l=(0,m.default)({page:e.current,pageSize:e.pageSize},t);a.getList(l)},a.handleDelete=function(e){var t=p.default.confirm,l=a.props.dispatch;t({title:"\u786e\u5b9a\u8981\u5220\u9664\u5e97\u94fa '".concat(e.name,"' \u5417?"),onOk:function(){var t=(0,f.default)(c.default.mark(function t(){return c.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l({type:"shop/remove",payload:{id:e.id}});case 2:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}()})},a.handleFormReset=function(){var e=a.props.form;e.resetFields(),a.setState({formValues:{}}),a.getList({})},a.handleSearch=function(e){e.preventDefault();var t=a.props.form;t.validateFields(function(e,t){if(!e){var l=(0,m.default)({},t,{updatedAt:t.updatedAt&&t.updatedAt.valueOf()});a.setState({formValues:l}),a.getList(l)}})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e}),e||a.setState({fileList:[]})},a.handleCreate=function(){a.setState({modalType:"create"},function(){a.handleModalVisible(!0)})},a.handleEdit=function(e){a.setState({modalType:"update",currentId:e.id,shopDetail:e,fileList:[{uid:"-1",status:"done",name:e.logo,url:e.logo,response:{result:[e.logo]}}]},function(){a.handleModalVisible(!0)})},a.handleAdd=function(e){var t=a.props.dispatch;t({type:"shop/add",payload:(0,m.default)({},e),callback:function(){s.default.success("\u6dfb\u52a0\u6210\u529f")}}),a.handleModalVisible()},a.handleUpdate=function(e){var t=a.props.dispatch,l=a.state.currentId;t({type:"shop/update",payload:(0,m.default)({},e,{id:l}),callback:function(){s.default.success("\u4fee\u6539\u6210\u529f")}}),a.handleModalVisible()},a}return(0,E.default)(t,e),(0,g.default)(t,[{key:"componentDidMount",value:function(){this.getList({}),this.getFormValue()}},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.shop.categoryList,l=e.floor.floorList;return F.default.createElement(L.default,{onSubmit:this.handleSearch,layout:"inline"},F.default.createElement(d.default,{gutter:{md:8,lg:24,xl:48}},F.default.createElement(u.default,{md:8,sm:24},F.default.createElement(S,{label:"\u5e97\u94fa\u5206\u7c7b"},t("shopCategoryId")(F.default.createElement(w.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},a.map(function(e){return F.default.createElement(T,{key:e.id,value:e.id},e.name)}))))),F.default.createElement(u.default,{md:8,sm:24},F.default.createElement(S,{label:"\u5e97\u94fa\u697c\u5c42"},t("floorId")(F.default.createElement(w.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},l.map(function(e){return F.default.createElement(T,{key:e.id,value:e.id},e.name)}))))),F.default.createElement(u.default,{md:8,sm:24},F.default.createElement("span",{className:M.default.submitButtons},F.default.createElement(o.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),F.default.createElement(o.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e")))))}},{key:"render",value:function(){var e=this,t=this.props,a=t.shop,l=a.data,r=a.categoryList,d=t.floor.floorList,u=t.loading,s=this.state,c=s.modalVisible,f=s.modalType,p=s.fileList,m=s.previewImage,h=s.previewVisible,v=s.shopDetail,g={handleAdd:this.handleAdd,categoryList:r,floorList:d,handleModalVisible:this.handleModalVisible,fileList:p,modalType:f,shopDetail:"update"===f?v:{},previewImage:m,previewVisible:h,handleUpdate:this.handleUpdate,handlePreview:function(t){e.setState({previewImage:t.url||t.thumbUrl,previewVisible:!0})},handleCancel:function(){return e.setState({previewVisible:!1})},uploadFile:function(t){return e.setState({fileList:t})}};return F.default.createElement(q.default,{title:"\u5e97\u94fa\u5217\u8868"},F.default.createElement(i.default,{bordered:!1},F.default.createElement("div",{className:M.default.tableList},F.default.createElement("div",{className:M.default.tableListForm},this.renderSimpleForm()),F.default.createElement("div",{className:M.default.tableListOperator},F.default.createElement(o.default,{icon:"plus",type:"primary",onClick:this.handleCreate},"\u65b0\u5efa")),F.default.createElement(x.default,{loading:u,rowKey:function(e){return e.id},data:l,columns:this.columns,onChange:this.handleStandardTableChange}))),F.default.createElement(D.default,(0,n.default)({},g,{modalVisible:c})))}}]),t}(F.PureComponent))||k)||k),O=N;t.default=O},phIN:function(e,t,a){e.exports={modal:"antd-pro-pages-mall-shop-quill-modal",richText:"antd-pro-pages-mall-shop-quill-richText"}}}]);