(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"wwL/":function(e,t,a){"use strict";var n=a("TqRt"),l=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("bbsP");var r=n(a("/wGt"));a("5NDa");var u=n(a("5rEg"));a("IzEo");var i=n(a("bx4M"));a("+L6B");var d=n(a("2/Rp"));a("miYZ");var o=n(a("tsqr")),s=n(a("o0o1")),c=n(a("yXPU"));a("/zsF");var f=n(a("PArb")),p=n(a("lwsE")),h=n(a("W8MJ")),m=n(a("a1gu")),y=n(a("Nsbk")),v=n(a("7W2i"));a("2qtc");var b,g,w=n(a("kLXV")),k=l(a("q1tI")),E=a("MuoO"),C=n(a("CkN6")),x=n(a("zHco")),V=n(a("VbPQ")),L=w.default.confirm,T=(b=(0,E.connect)(function(e){var t=e.shop,a=e.loading;return{shop:t,loading:a.models.shop}}),b(g=function(e){function t(){var e,a;(0,p.default)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return a=(0,m.default)(this,(e=(0,y.default)(t)).call.apply(e,[this].concat(l))),a.state={inputValue:"",drawerVisible:!1,modalType:"",currentId:""},a.columns=[{title:"\u5206\u7c7b\u540d\u79f0",dataIndex:"name"},{title:"\u64cd\u4f5c",render:function(e,t){return k.default.createElement("div",null,k.default.createElement("a",{onClick:function(){return a.handleEdit(t)}},"\u7f16\u8f91"),k.default.createElement(f.default,{type:"vertical"}),k.default.createElement("a",{onClick:function(){return a.handleDelete(t)}},"\u5220\u9664"))}}],a.getList=function(){var e=a.props.dispatch;e({type:"shop/fetchCategory"})},a.handleEdit=function(e){var t=e.id,n=e.name;a.setState({currentId:t,inputValue:n,modalType:"edit"},function(){a.setState({drawerVisible:!0})})},a.handleDelete=function(e){var t=e.id,n=e.name,l=a.props.dispatch;L({title:"\u786e\u5b9a\u8981\u5220\u9664\u5206\u7c7b '".concat(n,"'\u5417?"),onOk:function(){var e=(0,c.default)(s.default.mark(function e(){return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l({type:"shop/categoryDelete",payload:{id:t}});case 2:case"end":return e.stop()}},e,this)}));function a(){return e.apply(this,arguments)}return a}()})},a.handleCreate=function(){a.setState({modalType:"create"},function(){a.setState({drawerVisible:!0})})},a.handleClose=function(){a.setState({drawerVisible:!1,inputValue:""})},a.handleChange=function(e){a.setState({inputValue:e.target.value})},a.handleOk=(0,c.default)(s.default.mark(function e(){var t,n,l,r,u;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.props.dispatch,n=a.state,l=n.modalType,r=n.inputValue,u=n.currentId,r){e.next=5;break}return o.default.error("\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"),e.abrupt("return",!1);case 5:if("create"!==l){e.next=9;break}return e.next=8,t({type:"shop/categoryCreate",payload:{name:r}});case 8:o.default.success("\u521b\u5efa\u6210\u529f");case 9:if("edit"!==l){e.next=13;break}return e.next=12,t({type:"shop/categoryUpdate",payload:{name:r,id:u}});case 12:o.default.success("\u4fee\u6539\u6210\u529f");case 13:return a.handleClose(),e.abrupt("return",void 0);case 15:case"end":return e.stop()}},e,this)})),a}return(0,v.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){this.getList()}},{key:"render",value:function(){var e=this.props,t=e.shop.categoryList,a=e.loading,n=this.state,l=n.drawerVisible,o=n.modalType,s=n.inputValue;return k.default.createElement(x.default,{title:"\u5e97\u94fa\u5206\u7c7b"},k.default.createElement(i.default,{bordered:!1},k.default.createElement("div",{className:V.default.tableListOperator},k.default.createElement(d.default,{icon:"plus",type:"primary",onClick:this.handleCreate},"\u65b0\u5efa")),k.default.createElement("div",{className:V.default.tableList},k.default.createElement(C.default,{loading:a,data:{list:t},rowKey:function(e){return e.id},columns:this.columns}))),k.default.createElement(r.default,{visible:l,title:"create"===o?"\u6dfb\u52a0\u5206\u7c7b":"\u4fee\u6539\u5206\u7c7b",onClose:this.handleClose},k.default.createElement("div",null,k.default.createElement("span",{style:{display:"block",lineHeight:"35px"}},"\u5206\u7c7b\u540d\u79f0\uff1a"),k.default.createElement(u.default,{onChange:this.handleChange,value:s,type:"text",placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"})),k.default.createElement("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},k.default.createElement(d.default,{onClick:this.handleOk,type:"primary"},"\u786e\u5b9a"),k.default.createElement(d.default,{style:{marginLeft:"8px"},onClick:this.handleClose},"\u53d6\u6d88"))))}}]),t}(k.PureComponent))||g),I=T;t.default=I}}]);